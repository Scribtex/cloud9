<a:application xmlns:a="http://ajax.org/2005/aml">
    <a:window
      id        = "winNewFileTemplate"
      title     = "New from Template"
      icon      = ""
      center    = "true"
      render    = "runtime"
      width     = "350"
      height    = "300"
      skin      = "bk-window"
      resizable = "true"
      kbclose   = "true"
      buttons   = "close"
      draggable = "true">
        <a:vbox padding="10" anchors="0 0 0 0">

            <a:list id="lstFileTemplates"
              model     = "mdlFileTemplates"
              flex      = "1"
              margin    = "10 10 10 10"
              caption   = "[@caption]"
              icon      = "[@icon]"
              class     = "noscrollbar"
              scrollbar = "sbShared 12 12 55"
              each      = "item"
              eachvalue = "[@value]"
              style     = "overflow:hidden"
              onafterchoose = "
                btnFileTemplateSave.dispatchEvent('click');
              " />
            <a:hbox pack="end" padding="7" edge="10">
                <a:button id="btnFileTemplateSave" width="80" default="2"
                  class="btn-green" skin="btn-default-css3" caption="Create"
                  onclick="
                    require('ext/newresource/newresource').newfile(
                        '.' + lstFileTemplates.value,
                        lstFileTemplates.selected.firstChild.nodeValue
                    );
                    winNewFileTemplate.hide();
                  "/>
                <a:button id="btnFileTemplateCancel" skin="btn-default-css3" width="80"
                  onclick="winNewFileTemplate.hide()">Cancel</a:button>
            </a:hbox>
        </a:vbox>
    </a:window>

    <a:model id="mdlFileTemplates">
        <templates>
            <item value="tex" icon="page_white_tex.png" caption="LaTeX File"><![CDATA[]]></item>
            <item value="bib" icon="book.png" caption="BibTeX File"><![CDATA[]]></item>
            <item value="sty" icon="sty.png" caption="Style File"><![CDATA[]]></item>
            <item value="cls" icon="cls.png" caption="Class File"><![CDATA[]]></item>
        </templates>
    </a:model>
</a:application>
